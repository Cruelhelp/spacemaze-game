.game-container {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
}

.level {
  transition: transform 600ms cubic-bezier(0.23, 1, 0.32, 1), 
              opacity 600ms cubic-bezier(0.23, 1, 0.32, 1);
  opacity: 0;
  transform: translateY(-20rem) translateX(20rem);
  pointer-events: none;
}

.level[data-level="1"] {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0) translateX(0);
}

.level:hover .finish {
  transform: scale(1);
  opacity: 1;
  pointer-events: auto;
  transition: transform 200ms cubic-bezier(0.23, 1, 0.32, 1), 
              opacity 200ms linear;
}

input[type="checkbox"] {
  opacity: 0;
  pointer-events: none;
  position: absolute;
}

input:checked + .level + input + .level {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0) translateX(0);
}

input:checked + .level {
  opacity: 0 !important;
  pointer-events: none !important;
  transform: translateY(20rem) translateX(-20rem) !important;
}

.goal {
  position: absolute;
  top: 5%;
  left: 20%;
  width: 75%;
  height: 75%;
  border-radius: 50%;
  background: linear-gradient(135deg, hsl(180 100% 50%) 0%, hsl(200 100% 60%) 100%);
  box-shadow: 
    0 0 20px hsl(180 100% 50% / 0.6),
    0 0 40px hsl(180 100% 50% / 0.4),
    inset -0.5rem 0.5rem 1rem rgba(255, 255, 255, 0.3);
  cursor: pointer;
  transition: all 200ms cubic-bezier(0.23, 1, 0.32, 1);
}

.goal:hover {
  transform: scale(1.1);
  box-shadow: 
    0 0 30px hsl(180 100% 50% / 0.8),
    0 0 60px hsl(180 100% 50% / 0.6),
    inset -0.5rem 0.5rem 1rem rgba(255, 255, 255, 0.4);
}

.step {
  width: 10.1rem;
  height: 10.1rem;
  background: linear-gradient(135deg, hsl(280 60% 60%) 0%, hsl(260 50% 50%) 100%);
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  transform: translateY(5rem) translateX(-5rem);
  pointer-events: none;
  transition: transform 600ms cubic-bezier(0.755, 0.05, 0.855, 0.06), 
              opacity 600ms linear;
  transform-style: preserve-3d;
}

.step:before,
.step:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none !important;
}

/* Left face - darker purple */
.step:before {
  left: -20%;
  background: linear-gradient(135deg, hsl(270 50% 30%) 0%, hsl(260 50% 25%) 100%);
  transform-origin: 100% 100%;
  transform: skewY(-45deg);
  width: 20%;
  box-shadow: inset 2px 0 10px rgba(0, 0, 0, 0.5);
}

/* Bottom face - darkest */
.step:after {
  top: 100%;
  background: linear-gradient(135deg, hsl(260 40% 20%) 0%, hsl(270 40% 15%) 100%);
  transform-origin: 0% 0%;
  transform: skewX(-45deg);
  height: 20%;
  box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.6);
}

.step.start:before,
.step.finish:before {
  left: -50%;
  width: 50%;
}

.step.start:after,
.step.finish:after {
  height: 50%;
}

.step.start,
.step:hover,
.step:hover + .step {
  transform: scale(1);
  opacity: 1;
  pointer-events: auto;
  transition: transform 200ms cubic-bezier(0.23, 1, 0.32, 1), 
              opacity 200ms linear;
  box-shadow: 
    0 0 20px hsl(280 80% 65% / 0.4),
    0 0 40px hsl(280 80% 65% / 0.2),
    inset -0.5rem 0.5rem 1rem rgba(255, 255, 255, 0.1);
}

/* Row positions */
.step[data-r="0"] { top: 0; }
.step[data-r="1"] { top: 10rem; }
.step[data-r="2"] { top: 20rem; }
.step[data-r="3"] { top: 30rem; }
.step[data-r="4"] { top: 40rem; }

/* Column positions */
.step[data-c="0"] { left: 0; }
.step[data-c="1"] { left: 10rem; }
.step[data-c="2"] { left: 20rem; }
.step[data-c="3"] { left: 30rem; }
.step[data-c="4"] { left: 40rem; }

.center {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 50rem;
  height: 50rem;
  transform: perspective(100rem) translate3d(-50%, -50%, 0) rotateZ(-45deg) scale(0.7);
  transform-style: preserve-3d;
}

@media (max-width: 768px) {
  .center {
    transform: perspective(100rem) translate3d(-50%, -50%, 0) rotateZ(-45deg) scale(0.6);
  }
  
  .step {
    width: 8rem;
    height: 8rem;
  }
  
  .step[data-r="1"] { top: 8rem; }
  .step[data-r="2"] { top: 16rem; }
  .step[data-r="3"] { top: 24rem; }
  .step[data-r="4"] { top: 32rem; }
  
  .step[data-c="1"] { left: 8rem; }
  .step[data-c="2"] { left: 16rem; }
  .step[data-c="3"] { left: 24rem; }
  .step[data-c="4"] { left: 32rem; }
}
